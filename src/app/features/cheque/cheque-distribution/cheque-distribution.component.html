<div class="grid">
    <div class="col-12">
        <app-common-header [headerName]="'Cheque Distribution'"
            [imgSrc]="'assets/layout/images/icons/cheque-distribuion.png'">
            <!-- <button pButton pRipple type="button" icon="pi pi-plus" label="New Distribution"
                class="p-button-rounded p-button-raised" (click)="showModal()"></button> -->
        </app-common-header>
    </div>
    <!-- <div class="col-12">
        <app-dynamic-table [numberRowsShown]="10" rowSelectionMode="multiple" [rowsPerPageOptions]="[10,30,50]"
            [actionButtons]="tableActionButton" [headers]="tableData!.headers" [data]="tableData.data"
            [dataCount]="tableData.dataCount">
        </app-dynamic-table>
    </div> -->
    <div class="col-12">
        <form [formGroup]="distributionForm">
            <div class="grid flex flex-wrap">
                <div class="col-6">
                    <div class="card">
                        <div class="flex flex-wrap gap-3 p-fluid mb-3">
                            <div class="flex-auto">
                                <label for="cheques_type" class="block mb-1 text-color text-lg">Cheque Type</label>
                                <p-dropdown appendTo="body" [options]="cheques" placeholder="Select a Cheque Type"
                                    optionLabel="name" [showClear]="true" optionValue="code"
                                    formControlName="cheques_type"></p-dropdown>
                            </div>
                            <div class="flex-auto">
                                <label for="micr_code" class="block mb-1 text-color text-lg">Series</label>
                                <button type="button" pButton pRipple label="Series" (click)="showDetails()"></button>
                            </div>
                            <div class="flex-auto">
                                <label for="" class="block mb-1 text-color text-lg">Series</label>
                                <input formControlName="series" type="text" pinputtext=""
                                class="p-inputtext p-component p-element w-full" placeholder="Series No">
                            </div>
                            <div class="flex-auto">
                                <label for="micr_code" class="block mb-1 text-color text-lg">Select MICR No</label>
                                <p-dropdown [options]="micrList" placeholder="Select series" optionLabel="name"
                                [showClear]="true" optionValue="code" formControlName="micr_code">
                            </p-dropdown>
                            </div>
                        </div>
                        <p-table *ngIf="isVisibleDetails" [value]="receivedDetails" selectionMode="single"
                            [(selection)]="selectedSeries" dataKey="id">
                            <ng-template pTemplate="header" >
                                <tr>
                                    <th>ID</th>
                                    <th>Series No</th>
                                    <th>MICR Code</th>
                                    <th>Start</th>
                                    <th>End</th>
                                    <th>Quantity</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-item let-i="rowIndex + 1">
                                <tr [pSelectableRow]="item">
                                    <td>{{item.id}}</td>
                                    <td>{{item.series}}</td>
                                    <td>{{item.micrCode}}</td>
                                    <td>{{item.start}}</td>
                                    <td>{{item.end}}</td>
                                    <td>{{item.quantity}}</td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
                <div class="col-6">
                    <div class="card" formArrayName="userListDetails">
                        <div class="flex flex-wrap gap-3 p-fluid mb-3 surface-ground p-3" *ngFor="let userListDetail of userListDetailsFormArray.controls; let i = index" [formGroupName]="i">
                            <div class="flex-auto">
                                <label for="user_list" class="block mb-1 text-color text-lg">User List</label>
                                <p-dropdown appendTo="body" [options]="userList" placeholder="Select User"
                                    optionLabel="userName" [showClear]="true" optionValue="userId"
                                    formControlName="userId"></p-dropdown>
                            </div>
                            <div class="flex-auto">
                                <label for="cheques_type" class="block mb-1 text-color text-lg">Start</label>
                                <input type="text" pinputtext="" placeholder="Start"
                                    class="p-inputtext p-component p-element w-full" formControlName="start" />
                            </div>
                            <div class="flex-auto">
                                <label for="cheques_type" class="block mb-1 text-color text-lg">End</label>
                                <input type="text" pinputtext="" placeholder="End"
                                    class="p-inputtext p-component p-element w-full" formControlName="end" />
                            </div>
                            <div class="flex-auto">
                                <label for="cheques_type" class="block mb-1 text-color text-lg">Total Quantity</label>
                                <input type="text" pinputtext="" placeholder="Total"
                                    class="p-inputtext p-component p-element w-full" formControlName="quantity" />
                            </div>
                            <div class="flex-auto">
                                <button pButton pRipple type="button" icon="pi pi-times"
                                    class="p-button-rounded p-button-danger" (click)="removeUserList(i)"></button>
                            </div>
                        </div>
                    </div>
                    <button pButton pRipple type="button" icon="pi pi-plus" class="p-button-rounded" (click)="addUserList()"></button>
                </div>
            </div>
            <button pButton pRipple label="Distribute" class="p-button-raised p-button-rounded" (click)="submitDistributionFrm()"></button>
        </form>
        <div *ngIf="isVisible">
            <p-listbox [options]="micrCodeList" [(ngModel)]="selectedMicrCode" optionLabel="name" optionValue="code"
                [metaKeySelection]="false" [checkbox]="true" [filter]="true" [multiple]="true"></p-listbox>
        </div>

        <div *ngIf="isShowUserList" class="mt-5">
            <p-listbox [options]="userList" [(ngModel)]="selectedUser" optionLabel="name" optionValue="code"
                [metaKeySelection]="false" [checkbox]="true" [filter]="true" [multiple]="true"></p-listbox>
        </div>



        <!-- <div class="card overflow-auto">
            <div style="height: 145px">
                <div class="grid grid-nogutter surface-ground static border-2 border-round border-primary border-solid text-gray-800 p-3 mb-3 "
                    style="min-width: 300px; min-height: 60px;" *ngFor=" let receivedDetailsItem of receivedDetails">
                  
                    <div class="col-5 flex">
                        <div class="text-500 font-medium mb-2 mr-2 text-lg text-center">
                            MICR Code:
                        </div>
                        <div class="text-900 text-lg text-primary-500 font-semibold text-center">
                            {{ receivedDetailsItem.micrCode }}
                        </div>
                    </div>
                    <div class="col-3 flex">
                        <div class="text-500 font-medium mb-2 mr-2 text-lg text-center">
                            Start
                        </div>
                        <div class="text-900 text-lg text-primary-500 font-semibold text-center">
                            {{ receivedDetailsItem.start }}
                        </div>
                    </div>
                    <div class="col-3 flex">
                        <div class="text-500 font-medium mb-2 mr-2 text-lg text-center">
                            Quantity
                        </div>
                        <div class="text-900 text-lg text-primary-500 font-semibold text-center">
                            {{ receivedDetailsItem.quantity }}
                        </div>
                    </div>
                </div>
            </div>
        
        </div> -->
    </div>
</div>





<!-- <p-dialog header="New Cheque Distribution" [(visible)]="displayModal" [modal]="true" [style]="{width: '45vw'}"
    [baseZIndex]="10000">
    <app-new-distribution></app-new-distribution>
</p-dialog> -->